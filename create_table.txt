DROP TABLE IF EXISTS rating_by_timestamp;
CREATE TABLE IF NOT EXISTS rating_by_timestamp (
	movieId int,
	rating float,
	timestamp timestamp,
	month_by_year text,
	PRIMARY KEY ((month_by_year), timestamp)
)WITH CLUSTERING ORDER BY (timestamp ASC);

DROP TABLE IF EXISTS rating_by_movie_id;
CREATE TABLE IF NOT EXISTS rating_by_movie_id (
	userid int,
	movieid int,
	rating float,
	PRIMARY KEY ((movieid), userid, rating)
)WITH CLUSTERING ORDER BY (userid ASC, rating DESC);

DROP TABLE IF EXISTS tag_by_movie_id;
CREATE TABLE IF NOT EXISTS tag_by_movie_id (
	userid int,
	movieid int,
	tag text,
	PRIMARY KEY ((movieid), userid, tag)
)WITH CLUSTERING ORDER BY (userid ASC, tag DESC);