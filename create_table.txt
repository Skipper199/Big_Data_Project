cd DROP TABLE IF EXISTS movies_by_rating;
DROP TABLE IF EXISTS movies_by_keywords;
DROP TABLE IF EXISTS movies_by_genre;
DROP TABLE IF EXISTS movies_by_tags;
DROP TABLE IF EXISTS movie;


DROP TABLE IF EXISTS movies_by_rating;
CREATE TABLE IF NOT EXISTS movies_by_rating (
	movie_id int,
	rating float,
	user_id int,
	timestamp timestamp,
	date_bucket text,
	PRIMARY KEY ((date_bucket), timestamp)
)WITH CLUSTERING ORDER BY (timestamp ASC);

CREATE TABLE IF NOT EXISTS movies_by_keywords (
	movie_id int,
	title text,
	year_of_release text,
	overall_rating float,
	PRIMARY KEY((movie_id), title)
)WITH CLUSTERING ORDER BY (title DESC);

CREATE TABLE IF NOT EXISTS movies_by_genre (
	genre text,
	movie_id int,
	year_of_release text,
	overall_rating float,
	title text,
	PRIMARY KEY((genre, movie_id), year_of_release)
)WITH CLUSTERING ORDER BY (year_of_release DESC);

CREATE TABLE IF NOT EXISTS movies_by_tags (
	tag_id int, 
	overall_rating float,
	movie_id int,
	year_of_release text,
	title text,
	PRIMARY KEY((tag_id), overall_rating, movie_id)
)WITH CLUSTERING ORDER BY (overall_rating DESC, movie_id DESC);

CREATE TABLE IF NOT EXISTS movie (
	movie_id int,
	year_of_release text,
	genre text,
	overall_rating float,
	title text,
	tags text,
	PRIMARY KEY((movie_id), year_of_release)
)WITH CLUSTERING ORDER BY (year_of_release DESC);





